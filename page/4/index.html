<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Always Be Coding</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Always Be Coding">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Always Be Coding">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Always Be Coding">
  
    <link rel="alternate" href="/atom.xml" title="Always Be Coding" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Always Be Coding</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-80-删除排序数组中的重复项II" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/13/80-删除排序数组中的重复项II/" class="article-date">
  <time datetime="2018-07-13T07:11:33.000Z" itemprop="datePublished">2018-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/13/80-删除排序数组中的重复项II/">80.删除排序数组中的重复项II</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个排序数组，你需要在原地删除重复出现的元素，使得每个元素最多出现两次，返回移除后数组的新长度。</p>
<p>不要使用额外的数组空间，你必须在原地修改输入数组并在使用 O(1) 额外空间的条件下完成。</p>
<p>示例 1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">给定 nums = [1,1,1,2,2,3],</span><br><span class="line"></span><br><span class="line">函数应返回新长度 length = 5, 并且原数组的前五个元素被修改为 1, 1, 2, 2, 3 。</span><br><span class="line"></span><br><span class="line">你不需要考虑数组中超出新长度后面的元素。</span><br></pre></td></tr></table></figure>
<p>示例 2:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">给定 nums = [0,0,1,1,1,1,2,3,3],</span><br><span class="line"></span><br><span class="line">函数应返回新长度 length = 7, 并且原数组的前五个元素被修改为 0, 0, 1, 1, 2, 3, 3 。</span><br><span class="line"></span><br><span class="line">你不需要考虑数组中超出新长度后面的元素。</span><br></pre></td></tr></table></figure>
<p>题解：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int removeDuplicates(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        if (nums.size() == 0)</span><br><span class="line">            return 0;</span><br><span class="line">        if (nums.size() &lt; 2)</span><br><span class="line">            return nums.size();</span><br><span class="line">        int i = 0; //[0, i]中有效</span><br><span class="line">        int count = 1;</span><br><span class="line">        for (int j = 1; j &lt; nums.size(); ++j) &#123;</span><br><span class="line">            if (nums[j] != nums[j-1]) &#123;</span><br><span class="line">                nums[++i] = nums[j];</span><br><span class="line">                count = 1;</span><br><span class="line">            &#125;else &#123;</span><br><span class="line">                if (count &lt; 2) &#123;</span><br><span class="line">                    ++count;</span><br><span class="line">                    nums[++i] = nums[j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;    </span><br><span class="line">        &#125;</span><br><span class="line">        return i + 1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/13/80-删除排序数组中的重复项II/" data-id="cjkb0g4530016mu8o5e3fqt6o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/arrays/">arrays</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-26-删除排序数组中重复项" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/13/26-删除排序数组中重复项/" class="article-date">
  <time datetime="2018-07-13T02:35:48.000Z" itemprop="datePublished">2018-07-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/13/26-删除排序数组中重复项/">26.删除排序数组中重复项</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个排序数组，你需要在原地删除重复出现的元素，使得每个元素只出现一次，返回移除后数组的新长度。</p>
<p>不要使用额外的数组空间，你必须在原地修改输入数组并在使用 O(1) 额外空间的条件下完成。</p>
<p>示例 1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">给定数组 nums = [1,1,2], </span><br><span class="line"></span><br><span class="line">函数应该返回新的长度 2, 并且原数组 nums 的前两个元素被修改为 1, 2。 </span><br><span class="line"></span><br><span class="line">你不需要考虑数组中超出新长度后面的元素。</span><br></pre></td></tr></table></figure>
<p>示例 2:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">给定 nums = [0,0,1,1,1,2,2,3,3,4],</span><br><span class="line"></span><br><span class="line">函数应该返回新的长度 5, 并且原数组 nums 的前五个元素被修改为 0, 1, 2, 3, 4。</span><br><span class="line"></span><br><span class="line">你不需要考虑数组中超出新长度后面的元素。</span><br></pre></td></tr></table></figure>
<p>题解：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.size() == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;<span class="comment">//[0, i]中是符合要求的项</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; nums.size(); ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] != nums[j])</span><br><span class="line">                nums[++i] = nums[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/13/26-删除排序数组中重复项/" data-id="cjkb0g44t000smu8oag4r76bm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/arrays/">arrays</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-283-移动零" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/12/283-移动零/" class="article-date">
  <time datetime="2018-07-12T14:30:10.000Z" itemprop="datePublished">2018-07-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/12/283-移动零/">283.移动零</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个数组 nums，编写一个函数将所有 0 移动到数组的末尾，同时保持非零元素的相对顺序。<br>示例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: [0,1,0,3,12]</span><br><span class="line">输出: [1,3,12,0,0]</span><br></pre></td></tr></table></figure>
<p>说明:</p>
<pre><code>1. 必须在原数组上操作，不能拷贝额外的数组。
2. 尽量减少操作次数。
</code></pre><p>题解一：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">moveZeroes</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i])</span><br><span class="line">                temp.push_back(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; temp.size(); ++i)</span><br><span class="line">            nums[i] = temp[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = temp.size(); i &lt; nums.size(); ++i)</span><br><span class="line">            nums[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>题解二：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">moveZeroes</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> p = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] != <span class="number">0</span>) &#123;</span><br><span class="line">                nums[p++] = nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = p; i &lt; nums.size(); ++ i)</span><br><span class="line">            nums[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>题解三：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">moveZeroes</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> p = <span class="number">0</span>; <span class="comment">// [0, p)为非0元素， [p, i）为0元素</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] != <span class="number">0</span>) &#123;</span><br><span class="line">                swap(nums[p++],nums[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/12/283-移动零/" data-id="cjkb0g44v000umu8o3zbj0nn3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/arrays/">arrays</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-比特币闪电网络" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/12/比特币闪电网络/" class="article-date">
  <time datetime="2018-07-12T13:00:04.000Z" itemprop="datePublished">2018-07-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/12/比特币闪电网络/">比特币闪电网络</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>比特币的处理能力非常弱，程序员在不断的探索优化代码（优化编译、改进算法、调整数据结构）方面下了很多功夫，但是见效甚微，交易处理能力和区块链数据容量似乎是一对无可调和的矛盾。思路决定出路，常规方法找不到出路，就逼得社区换一个思路考虑这个问题。既然在比特币区块链中优化性能如此艰难，为何不尽可能将交易放到链外执行？于是就有了闪电网络。</p>
<p>闪电网络在链下实现点对点微支付，处理能力的瓶颈被彻底打破，时延、最终性、容量甚至隐私问题也迎刃而解，社区甚至认为：“闪电网络”的论文（The Bitcoin Lightning Network: Scalable Off-Chain Instant Payments）对比特币的重要性仅在中本聪的创世论文之下，排名第二。</p>
<p>要理解闪电网络，只要理解“链下点对点微支付”两个部分：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.微支付</span><br><span class="line">2.链下点对点</span><br></pre></td></tr></table></figure>
<p>1.微支付</p>
<p>微支付是基于这样一个假设，假设是单次支付的金额足够小，即使一方违约另一方的损失也非常小，风险可以承受。因此使用时必须注意“微支付”这个前提。多少资金算“微”，显然应该根据业务而定。一笔大的支付可以切成小的微支付多次支付来达成。</p>
<p>2.链下点对点</p>
<p>闪电网络的基础是交易双方之间的双向微支付通道，这条通道并不是由比特币主网创建的，而是点对点机制创建的。假如一次微支付张三要给不认识的王五支付0.07个比特币，那么会经过下面三部：</p>
<p>1）建立链下通道，假设李四跟王五之前有直接通道，同时张三跟李四之间正好也有直接支付通道，那么现在张三可以间接的通过李四寻找到了王五，建立一条三个节点的通道：</p>
<p><img src="http://ww1.sinaimg.cn/large/007330Aply1ft7dohdhnrj313s0dsmyp.jpg" alt=""></p>
<p>2）传递一个暗号</p>
<p>由王五创建并传递给张三一个加密过的接头暗号“8bff37e78b38d2d470be8361058e4c50”，这个暗号是王五用哈希函数加密的，任何人不能由这个密文推倒出明文，所以张三并不知道明文是什么，到现在为止只有王五一个人知道明文。如果自己想玩一下哈希加密去这里：<a href="http://www.kjson.com/encrypt/hash/?fm=map" target="_blank" rel="noopener">http://www.kjson.com/encrypt/hash/?fm=map</a><br><img src="http://ww1.sinaimg.cn/large/007330Aply1ft7eawysckj312w0e8dhn.jpg" alt=""><br>3）用暗号达成合约</p>
<p>张三利用加密过的暗号8bff37e78b38d2d470be8361058e4c50和李四之间达成一个合约，只要李四在两天之内告诉他暗号的明文，他将支付给李四0.071个 btc，此时张三有0.071个 btc 被冻结。如果李四做不到，合约终止，两天之后张三0.071个 btc解除冻结。</p>
<p>李四利用加密过的暗号8bff37e78b38d2d470be8361058e4c50和王五之间达成一个合约，只要王五在一天之内告诉他哈希值的明文，他将支付给王五0.07个 btc，此时李四有0.07个 btc 被冻结，如果王五做不到，合约终止，一天之后，李四0.07个 btc 解除冻结。<br><img src="http://ww1.sinaimg.cn/large/007330Aply1ft7ebogwc8j312c0eqwg3.jpg" alt=""><br>4）遵守合约，交易达成</p>
<p>一切就绪之后，</p>
<p>1.王五告诉了李四，暗号的明文是“Bitchain”，因为王五当时是这么做的（实际上的约定的比特币加密可能不是这个）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MD5(Bitchain) = 8bff37e78b38d2d470be8361058e4c50</span><br></pre></td></tr></table></figure></p>
<p>2.李四利用上文的公式检查正确性后没问题，按照约定支付王五0.07个 btc，</p>
<ol start="3">
<li>李四因为已经支付给王五0.07个比特币了，必然会立马告诉张三明文是“Bitchain”，不然自己亏损了0.07个 btc，</li>
</ol>
<p>4.张三用上文的加密公式检查正确性后没问题按照约定支付李四0.071个 btc。 李四作为中间商遵守了承诺，获得0.001个 btc 作为中介佣金。</p>
<p>以上4步骤如图所示：<br><img src="http://ww1.sinaimg.cn/large/007330Aply1ft7ed7zktbj31160emabu.jpg" alt=""><br>整个过程中的全部动作都发生在比特币区块链之外，只是第四步发生之后，把最终结果上报给比特币网络登记。</p>
<p>因为有中间商可以赚佣金，闪电网络的支付通道未来也可能逐渐向少数大型中介集中，变成若干大型中介彼此互联、普通用户直连大型中介的形式。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/12/比特币闪电网络/" data-id="cjkb0g46f0034mu8ol0njevww" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bitcoin/">bitcoin</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-二叉树层次遍历II" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/11/二叉树层次遍历II/" class="article-date">
  <time datetime="2018-07-11T12:50:02.000Z" itemprop="datePublished">2018-07-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/11/二叉树层次遍历II/">二叉树层次遍历II</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个二叉树，返回其节点值自底向上的层次遍历。 （即按从叶子节点所在层到根节点所在的层，逐层从左向右遍历）</p>
<p>例如：<br>给定二叉树 [3,9,20,null,null,15,7],</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">  / \</span><br><span class="line"> 9  20</span><br><span class="line">   /  \</span><br><span class="line">  15   7</span><br></pre></td></tr></table></figure>
<p>返回其自底向上的层次遍历为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  [15,7],</span><br><span class="line">  [9,20],</span><br><span class="line">  [3]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>思路：</p>
<p>这个跟leetcode-102-Binary Tree Level Order Traversal 其实差不多的。</p>
<p>唯一不同的是在每一层遍历完之后，得到本层的数值，插入到最终result数组里的时候从头插入，即可实现倒序。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; levelOrderBottom(TreeNode* root)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">queue</span>&lt;TreeNode*&gt;que;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;result;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>)<span class="keyword">return</span> result;</span><br><span class="line">        que.push(root);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!que.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> size = que.size();</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                TreeNode* node = que.front();</span><br><span class="line">                que.pop();</span><br><span class="line">                temp.push_back(node-&gt;val);</span><br><span class="line">                <span class="keyword">if</span> (node-&gt;left != <span class="literal">NULL</span>)que.push(node-&gt;left);</span><br><span class="line">                <span class="keyword">if</span> (node-&gt;right != <span class="literal">NULL</span>)que.push(node-&gt;right);</span><br><span class="line">            &#125;            </span><br><span class="line">            result.insert(result.begin(), temp);<span class="comment">//从头部插入即可实现倒序</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/11/二叉树层次遍历II/" data-id="cjkb0g460002kmu8ojx5h9tf9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/leetcode/">leetcode</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-二叉树层次遍历I" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/11/二叉树层次遍历I/" class="article-date">
  <time datetime="2018-07-11T12:39:40.000Z" itemprop="datePublished">2018-07-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/11/二叉树层次遍历I/">二叉树层次遍历I</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>给定一个二叉树，返回其按层次遍历的节点值。 （即逐层地，从左到右访问所有节点）。</p>
<p>例如:<br>给定二叉树: [3,9,20,null,null,15,7],</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line"> / \</span><br><span class="line">9  20</span><br><span class="line">  /  \</span><br><span class="line"> 15   7</span><br></pre></td></tr></table></figure>
<p>返回其层次遍历结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  [3],</span><br><span class="line">  [9,20],</span><br><span class="line">  [15,7]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>思路：</p>
<p>与普通层次遍历稍微不一样的地方就是，需要分出每一层的结点数据来。</p>
<p>如果提前知道每一层数据的个数n，那么只需要循环n次即可取出这一层的数据。那么刚好保持队列内一直为同一层的数据即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; levelOrder(TreeNode* root) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; result;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        <span class="built_in">queue</span>&lt;TreeNode*&gt; que;</span><br><span class="line">        que.push(root);</span><br><span class="line">        <span class="keyword">while</span> (!que.empty()) &#123;</span><br><span class="line">            <span class="keyword">int</span> size = que.size();</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; temp;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">                TreeNode* node = que.front();</span><br><span class="line">                que.pop();</span><br><span class="line">                temp.push_back(node-&gt;val);</span><br><span class="line">                <span class="keyword">if</span> (node-&gt;left != <span class="literal">NULL</span>)que.push(node-&gt;left);</span><br><span class="line">                <span class="keyword">if</span> (node-&gt;right != <span class="literal">NULL</span>)que.push(node-&gt;right);</span><br><span class="line">            &#125;</span><br><span class="line">            result.push_back(temp);</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/11/二叉树层次遍历I/" data-id="cjkb0g45y002imu8ooj3rvaj1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/leetcode/">leetcode</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-strStr" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/11/strStr/" class="article-date">
  <time datetime="2018-07-11T11:56:45.000Z" itemprop="datePublished">2018-07-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/11/strStr/">strStr</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>实现 strStr() 函数。</p>
<p>给定一个 haystack 字符串和一个 needle 字符串，在 haystack 字符串中找出 needle 字符串出现的第一个位置 (从0开始)。如果不存在，则返回  -1。</p>
<p>示例 1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: haystack = &quot;hello&quot;, needle = &quot;ll&quot;</span><br><span class="line">输出: 2</span><br></pre></td></tr></table></figure>
<p>示例 2:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入: haystack = &quot;aaaaa&quot;, needle = &quot;bba&quot;</span><br><span class="line">输出: -1</span><br></pre></td></tr></table></figure>
<p>说明:</p>
<p>当 needle 是空字符串时，我们应当返回什么值呢？这是一个在面试中很好的问题。</p>
<p>对于本题而言，当 needle 是空字符串时我们应当返回 0 。这与C语言的 strstr() 以及 Java的 indexOf() 定义相符。</p>
<p>题解一：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">strStr</span><span class="params">(<span class="built_in">string</span> haystack, <span class="built_in">string</span> needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (needle == <span class="string">""</span>) </span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (haystack.size() &lt; needle.size())</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; haystack.size() - needle.size() + <span class="number">1</span>; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> p = i, j = <span class="number">0</span>; j &lt; needle.size(); ++j, ++p) &#123;</span><br><span class="line">                <span class="keyword">if</span> (haystack[p] != needle[j])&#123;</span><br><span class="line">                    flag = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (flag == <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>题解二：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">strStr</span><span class="params">(<span class="built_in">string</span> haystack, <span class="built_in">string</span> needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(needle == <span class="string">""</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(haystack.size() &lt; needle.size()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; haystack.size()-needle.size()+<span class="number">1</span>;++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(haystack.substr(i,needle.size()) == needle)</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/11/strStr/" data-id="cjkb0g45x002gmu8oarh4n5si" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/leetcode/">leetcode</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-golang-container" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/09/golang-container/" class="article-date">
  <time datetime="2018-07-09T12:35:40.000Z" itemprop="datePublished">2018-07-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/09/golang-container/">golang_container</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>定义数组的三种方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr1 [5]int</span><br><span class="line">arr2 := [3]int&#123;1, 3, 5&#125;</span><br><span class="line">arr3 := [...]int&#123;2, 4, 6, 8, 10&#125;</span><br><span class="line">var grid [4][5]int</span><br></pre></td></tr></table></figure>
<p>函数形参中含有数组，是传值，在函数体中对数组的改变不会影响到实参数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">func printArray(arr [5]int) &#123;</span><br><span class="line">	arr[0] = 100</span><br><span class="line">	for i, v := range arr &#123;</span><br><span class="line">		fmt.Println(i, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>slice是array的view，包含ptr，len和cap三个成员。函数形参中用slice会改变实参中数组的值。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/09/golang-container/" data-id="cjkb0g45k001wmu8ocz8qb3el" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/golang/">golang</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-数字货币简单分类" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/09/数字货币简单分类/" class="article-date">
  <time datetime="2018-07-09T05:40:28.000Z" itemprop="datePublished">2018-07-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/09/数字货币简单分类/">数字货币简单分类</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>数据货币可以简单的分为如下几个大类：</p>
<ol>
<li><p>货币类</p>
<p> 货币类是指在区块链领域充当货币功能，解决价值传递的问题，如BTC、BCH、LTC、ZEC等。</p>
</li>
<li><p>公链类<br> 基础链，解决技术承载的问题。如ETH、EOS、NEO、量子链、IOTA等。</p>
</li>
<li><p>平台类<br> 平台币主要是以交易所为依靠，靠交易所的分红和利好维持价格。如HT，BNB，OKB,ZB等。</p>
</li>
<li><p>应用类<br> 这个类别的币主要是解决原有互联网场景下所不能解决的价值传输的问题，绝大部分多少依托公链进行开发，如建立在ETH平台上的应用：SNT、MCO、DGD、MANA，建立在EOS上的UIP、OCT，建立在NEO上的ONT，GAS等。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/09/数字货币简单分类/" data-id="cjkb0g46c002ymu8o36aw138m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cryptocurrency/">cryptocurrency</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-比特币区块结构剖析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/07/比特币区块结构剖析/" class="article-date">
  <time datetime="2018-07-07T15:05:37.000Z" itemprop="datePublished">2018-07-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/07/比特币区块结构剖析/">比特币区块结构剖析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>比特币的区块数据里包含了比特币链上的核心信息，包括比特币如何交易，区块扩容等问题。 比特币从诞生到现在，每10分钟诞生一个区块，访问 <a href="https://blockchain.info/" target="_blank" rel="noopener">https://blockchain.info/</a> 查看最近的区块信息，可以看到当前的区块大小已经是中本聪设置的1MB容量。</p>
<p>比特币的区块数据里包含了比特币链上的核心信息，包括比特币如何交易，区块扩容等问题。</p>
<p>比特币从诞生到现在，每10分钟诞生一个区块，访问 blockchain.info/ 查看最近的区块信息，可以看到当前的区块大小已经是中本聪设置的1MB容量。<br><img src="http://ww1.sinaimg.cn/large/883ddbbdly1ft1p8d5g4jj21ts0kated.jpg" alt=""></p>
<h2 id="一、区块链数据结构"><a href="#一、区块链数据结构" class="headerlink" title="一、区块链数据结构"></a>一、区块链数据结构</h2><p>一个完整的区块结构主要由以下几部分构成：<br><img src="http://ww1.sinaimg.cn/large/883ddbbdly1ft1pf42c94j210e0k0q63.jpg" alt=""></p>
<h2 id="二、区块信息解析"><a href="#二、区块信息解析" class="headerlink" title="二、区块信息解析"></a>二、区块信息解析</h2><p>我们从 webbtc.com 选择一个区块哈希值为000000000003ba27aa200b1cecaad478d2b00432346c3f1f3986da1afd33e506的早期区块进行分析。<br><img src="http://ww1.sinaimg.cn/large/883ddbbdly1ft1pg63aipj21uo0q0hcs.jpg" alt=""><br>可以看到该区块中包含了三笔交易信息，下面对区块信息字段进行解析。</p>
<h3 id="1-区块头分析"><a href="#1-区块头分析" class="headerlink" title="1.区块头分析"></a>1.区块头分析</h3><p>前80个字节是区块头。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;hash&quot;: &quot;000000000003ba27aa200b1cecaad478d2b00432346c3f1f3986da1afd33e506&quot;,</span><br><span class="line">    &quot;ver&quot;: 1,</span><br><span class="line">    &quot;prev_block&quot;: &quot;000000000002d01c1fccc21636b607dfd930d31d01c3a62104612a1719011250&quot;,</span><br><span class="line">    &quot;mrkl_root&quot;: &quot;f3e94742aca4b5ef85488dc37c06c3282295ffec960994b2c0d5ac2a25a95766&quot;,</span><br><span class="line">    &quot;time&quot;: 1293623863,</span><br><span class="line">    &quot;bits&quot;: 453281356,</span><br><span class="line">    &quot;nonce&quot;: 274148111</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/883ddbbdly1ft1pik0da0j21020poq86.jpg" alt=""><br>说明：</p>
<ul>
<li>版本、父区块头哈希值和Merkle根采用的是小端格式编码，即低有效位放在前面。</li>
<li>时间戳表示的是自1970年1月1日0时0分0秒以来的秒数</li>
</ul>
<h3 id="2-Coinbase交易信息分析"><a href="#2-Coinbase交易信息分析" class="headerlink" title="2.Coinbase交易信息分析"></a>2.Coinbase交易信息分析</h3><p>一个区块第一个交易规定为coinbase交易，即由挖矿产生的比特币奖励，可以看到目前挖出每个区块的奖励是12.5个比特币，下一次减半会发生在2020年。除了挖矿奖励，“矿工”的激励还有新增账本记账的手续费，在未来比特币总量不增加之后，后者会成为矿工的主要收入。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;hash&quot;: &quot;8c14f0db3df150123e6f3dbbf30f8b955a8249b62ac1d1ff16284aefa3d06d87&quot;,</span><br><span class="line">    &quot;ver&quot;: 1,</span><br><span class="line">    &quot;vin_sz&quot;: 1,</span><br><span class="line">    &quot;vout_sz&quot;: 1,</span><br><span class="line">    &quot;lock_time&quot;: 0,</span><br><span class="line">    &quot;size&quot;: 135,</span><br><span class="line">    &quot;in&quot;: [&#123;</span><br><span class="line">        &quot;prev_out&quot;: &#123;</span><br><span class="line">            &quot;hash&quot;: &quot;0000000000000000000000000000000000000000000000000000000000000000&quot;,</span><br><span class="line">            &quot;n&quot;: 4294967295</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;coinbase&quot;: &quot;044c86041b020602&quot;</span><br><span class="line">    &#125;],</span><br><span class="line">    &quot;out&quot;: [&#123;</span><br><span class="line">        &quot;value&quot;: &quot;50.00000000&quot;,</span><br><span class="line">        &quot;scriptPubKey&quot;: &quot;041b0e8c2567c12536aa13357b79a073dc4444acb83c4ec7a0e2f99dd7457516c5817242da796924ca4e99947d087fedf9ce467cb9f7c6287078f801df276fdf84 OP_CHECKSIG&quot;,</span><br><span class="line">        &quot;next_in&quot;: &#123;</span><br><span class="line">            &quot;hash&quot;: &quot;f3e6066078e815bb24db0dfbff814f738943bddaaa76f8beba360cfe2882480a&quot;,</span><br><span class="line">            &quot;n&quot;: 12</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;],</span><br><span class="line">    &quot;nid&quot;: &quot;70ab531a68f973f7d20b8260cb5e7fecba3699c48715b8b44539ff9776d0b88e&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/883ddbbdly1ft1pkjjresj2104112q81.jpg" alt=""></p>
<h3 id="3-交易信息记录"><a href="#3-交易信息记录" class="headerlink" title="3.交易信息记录"></a>3.交易信息记录</h3><p>下面来看下普通的交易记录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;hash&quot;: &quot;fff2525b8931402dd09222c50775608f75787bd2b87e56995a7bdd30f79702c4&quot;,</span><br><span class="line">    &quot;ver&quot;: 1,</span><br><span class="line">    &quot;vin_sz&quot;: 1,</span><br><span class="line">    &quot;vout_sz&quot;: 2,</span><br><span class="line">    &quot;lock_time&quot;: 0,</span><br><span class="line">    &quot;size&quot;: 259,</span><br><span class="line">    &quot;in&quot;: [&#123;</span><br><span class="line">        &quot;prev_out&quot;: &#123;</span><br><span class="line">            &quot;hash&quot;: &quot;87a157f3fd88ac7907c05fc55e271dc4acdc5605d187d646604ca8c0e9382e03&quot;,</span><br><span class="line">            &quot;n&quot;: 0</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;scriptSig&quot;: &quot;3046022100c352d3dd993a981beba4a63ad15c209275ca9470abfcd57da93b58e4eb5dce82022100840792bc1f456062819f15d33ee7055cf7b5ee1af1ebcc6028d9cdb1c3af774801 04f46db5e9d61a9dc27b8d64ad23e7383a4e6ca164593c2527c038c0857eb67ee8e825dca65046b82c9331586c82e0fd1f633f25f87c161bc6f8a630121df2b3d3&quot;</span><br><span class="line">    &#125;],</span><br><span class="line">    &quot;out&quot;: [&#123;</span><br><span class="line">            &quot;value&quot;: &quot;5.56000000&quot;,</span><br><span class="line">            &quot;scriptPubKey&quot;: &quot;OP_DUP OP_HASH160 c398efa9c392ba6013c5e04ee729755ef7f58b32 OP_EQUALVERIFY OP_CHECKSIG&quot;,</span><br><span class="line">            &quot;address&quot;: &quot;1JqDybm2nWTENrHvMyafbSXXtTk5Uv5QAn&quot;,</span><br><span class="line">            &quot;next_in&quot;: &#123;</span><br><span class="line">                &quot;hash&quot;: &quot;5aa8e36f9423ee5fcf17c1d0d45d6988b8a5773eae8ad25d945bf34352040009&quot;,</span><br><span class="line">                &quot;n&quot;: 6</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;value&quot;: &quot;44.44000000&quot;,</span><br><span class="line">            &quot;scriptPubKey&quot;: &quot;OP_DUP OP_HASH160 948c765a6914d43f2a7ac177da2c2f6b52de3d7c OP_EQUALVERIFY OP_CHECKSIG&quot;,</span><br><span class="line">            &quot;address&quot;: &quot;1EYTGtG4LnFfiMvjJdsU7GMGCQvsRSjYhx&quot;,</span><br><span class="line">            &quot;next_in&quot;: &#123;</span><br><span class="line">                &quot;hash&quot;: &quot;220ebc64e21abece964927322cba69180ed853bb187fbc6923bac7d010b9d87a&quot;,</span><br><span class="line">                &quot;n&quot;: 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;nid&quot;: &quot;fc7704fdd7ec5e69163e51b827fea2133990a26defee2b475408b3c16fd9a968&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="三、扩容问题如何解决"><a href="#三、扩容问题如何解决" class="headerlink" title="三、扩容问题如何解决"></a>三、扩容问题如何解决</h2><p>在比特币诞生初期，中本聪为了比特币系统的安全和稳定，防止比特币系统被攻击而把区块大小设置为1M。在当时比特币用户量少，比特币交易是不存在拥堵问题的。随着比特币网络的发展，单个区块存储的交易信息越来越多，1MB区块仅能容纳2000条左右交易，交易量大时需要排队等待区块写入确认，交易网络拥堵问题越来越严重，为此也出现了解决容量问题的几个方案。</p>
<h3 id="1-区块扩容"><a href="#1-区块扩容" class="headerlink" title="1.区块扩容"></a>1.区块扩容</h3><p>解决区块过小问题，最直接的办法就是扩容。区块体积中位数在2015年里得到了翻番，从1月份的292KB快速增长至12月份的749KB。2015 年12月比特币香港扩容会议由Pieter Wuille提出了隔离见证(Segregated Witness)之后，扩容问题甚至已经简化为仅升级至2MB。为什么不把区块设置的更大一些，比如30MB？区块存储的是交易信息，若提高区块体积限制至30MB，最大的问题不是CPU计算能力瓶颈，而是块的传播与存储。30MB的块可能会导致全网孤块率和空块率大幅上升，一年产出1.5TB的区块链数据也超出大部分节点机器的硬盘容量。基于这1.5TB的数据，区块链浏览器、钱包服务商等则可能膨胀10倍达到15TB，对于目前来说已经远超普通机器/数据库的磁盘容量。除了扩容，还有另外的解决方案就是隔离见证和闪电网络。</p>
<h3 id="2-隔离见证和闪电网络"><a href="#2-隔离见证和闪电网络" class="headerlink" title="2.隔离见证和闪电网络"></a>2.隔离见证和闪电网络</h3><p>隔离见证(SegWit)是把交易的签名数据从交易数据中剥离出来，用于解决延展性攻击。比特币交易主要是由两部分数据组成。其中一部分为交易数据，它负责记录比特币的来源和去处。而另外一部分则是见证数据，这部分数据由一些加密数据组成，用于证明这些交易请求是真实可信的。中本聪在设计比特币的时候直接把这两部分信息都放在了区块内，所以一个区块就承载不了更多的交易信息。如果隔离了“见证数据”，那么区块链只记录交易数据，那么一个区块可承载更多的交易。闪电网络（Lightning Network）方案是在比特币网络上再外加一个「闪电网络（Lightning Network）」，把原有比特币链上金额较少的交易，转移到这个闪电网络来处理，完成后再记录到原链上。这是一种链外交易（Off-chain transaction），目的是解决加快交易速度，以太坊（Ethereum）也有类似的方案叫Raiden Network。用搭乘公共汽车的来假设，试想像比特币的区块是一辆公共汽车，每隔十分钟，固定时间发车，当要乘车的人超过公共汽车容量，不能上车的人就要等待下一班。我们的目的就是让更多的人可以乘车，即承载更多的交易。</p>
<p><img src="http://ww1.sinaimg.cn/large/883ddbbdly1ft1pn1iyw6j20ze0ky4h7.jpg" alt=""></p>
<p>比特币区块链本身是可以根据交易费率来优先完成交易的，如果你想快速完成转账等功能，可以设置较高的手续费。这就类似公共汽车让出更高价格买票的人先上车，不愿付高车票的人就要一直等下去，直到坐车的人变少。隔离见证就是我们在公共汽车后面加挂一个货车（SegWit车箱），所有乘车的人都要把背包和行李放到这个货车上面，因为少了随身物品，每个人占的空间变少了，公共汽车就可以多载一些人，乘载量就变多了。闪电网络可以理解为在公交车路线旁边再架一条铁路，让挤不上公共汽车的人直接去坐火车，解决掉太多人要搭乘车（交易），而汽车太小的问题。隔离见证和闪电网络在技术上有可行性，但是同样有许多质疑。依赖于隔离见证的闪电网络等二层网络并不能被认为是比特币的扩容方案，因为闪电网络的交易并不等价于比特币的点对点的链上交易，大部分比特币交易的场景并不适用于闪电网络。假设闪电网络部署成功，也会存在大型支付中心的问题，这违背了比特币做为点对点支付系统的初衷。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/07/比特币区块结构剖析/" data-id="cjkb0g46h0036mu8ob0ik9dze" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blockchain/">blockchain</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linked-List/">Linked List</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arrays/">arrays</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bitcoin/">bitcoin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blockchain/">blockchain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cryptocurrency/">cryptocurrency</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ethererum/">ethererum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ethereum/">ethereum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/golang/">golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hyperledger-fabric/">hyperledger-fabric</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/">leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stack-queue/">stack&&queue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tree/">tree</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/Linked-List/" style="font-size: 16.67px;">Linked List</a> <a href="/tags/arrays/" style="font-size: 20px;">arrays</a> <a href="/tags/bitcoin/" style="font-size: 11.67px;">bitcoin</a> <a href="/tags/blockchain/" style="font-size: 15px;">blockchain</a> <a href="/tags/cryptocurrency/" style="font-size: 10px;">cryptocurrency</a> <a href="/tags/ethererum/" style="font-size: 10px;">ethererum</a> <a href="/tags/ethereum/" style="font-size: 15px;">ethereum</a> <a href="/tags/golang/" style="font-size: 15px;">golang</a> <a href="/tags/hyperledger-fabric/" style="font-size: 10px;">hyperledger-fabric</a> <a href="/tags/leetcode/" style="font-size: 13.33px;">leetcode</a> <a href="/tags/stack-queue/" style="font-size: 11.67px;">stack&&queue</a> <a href="/tags/tree/" style="font-size: 18.33px;">tree</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/08/01/solidity中constantpureview的区别/">solidity中constantpureview的区别</a>
          </li>
        
          <li>
            <a href="/2018/08/01/solidity中storage与memory区别/">solidity中storage与memory区别</a>
          </li>
        
          <li>
            <a href="/2018/08/01/区别/">区别</a>
          </li>
        
          <li>
            <a href="/2018/07/29/比特币区块为什么是1M大小？/">比特币区块为什么是1M大小？</a>
          </li>
        
          <li>
            <a href="/2018/07/28/智能合约基本中的基本元素/">智能合约源文件的基本要素概览</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>